<div class="modal-overlay" (click)="dismiss()">
  <div class="modal-content glass-card rounded-xl overflow-hidden" (click)="$event.stopPropagation()" role="dialog" aria-modal="true">
    @if (project().imageUrl) {
      <div class="flex-shrink-0 w-full h-48 sm:h-56 overflow-hidden bg-slate-800/50 border-b border-slate-700/50">
        <img
          [src]="project().imageUrl"
          [alt]="project().title"
          loading="lazy"
          decoding="async"
          draggable="false"
          (dragstart)="$event.preventDefault()"
          (contextmenu)="$event.preventDefault()"
          class="w-full h-full object-cover object-top select-none"
        />
      </div>
    }
    <div class="modal-header flex-shrink-0 flex justify-between items-start p-6 border-b border-slate-700/50">
      <div>
        <h2 class="text-xl font-semibold text-slate-100">{{ project().title }}</h2>
        <p class="text-sm text-slate-500 mt-1">{{ project().year }} · {{ project().role }}</p>
      </div>
      <button type="button" (click)="onClose()" class="text-slate-400 hover:text-slate-200 transition-colors p-1" aria-label="Close">
        ✕
      </button>
    </div>
    <div class="modal-body flex-1 min-h-0 p-6 space-y-6 overflow-y-auto">
      <div>
        <h3 class="text-sm font-semibold text-emerald-400 mb-2">Description</h3>
        <p class="text-slate-400 text-sm leading-relaxed">{{ project().description }}</p>
      </div>
      @if (project().problem) {
        <div>
          <h3 class="text-sm font-semibold text-emerald-400 mb-2">Problem Statement</h3>
          <p class="text-slate-400 text-sm leading-relaxed">{{ project().problem }}</p>
        </div>
      }
      @if (project().technicalDecisions?.length) {
        <div>
          <h3 class="text-sm font-semibold text-emerald-400 mb-2">Technical Decisions</h3>
          <ul class="space-y-1 text-slate-400 text-sm list-disc pl-4">
            @for (item of project().technicalDecisions; track item) { <li>{{ item }}</li> }
          </ul>
        </div>
      }
      @if (project().challenges?.length) {
        <div>
          <h3 class="text-sm font-semibold text-emerald-400 mb-2">Challenges Solved</h3>
          <ul class="space-y-1 text-slate-400 text-sm list-disc pl-4">
            @for (item of project().challenges; track item) { <li>{{ item }}</li> }
          </ul>
        </div>
      }
      @if (project().architecture) {
        <div>
          <h3 class="text-sm font-semibold text-emerald-400 mb-2">Architecture</h3>
          <p class="text-slate-400 text-sm leading-relaxed">{{ project().architecture }}</p>
        </div>
      }
      <div>
        <h3 class="text-sm font-semibold text-emerald-400 mb-2">Tech Stack</h3>
        <div class="flex flex-wrap gap-2">
          @for (tech of project().tech; track tech) {
            <span class="px-2 py-1 rounded text-xs bg-slate-700/50 text-slate-300 font-mono">{{ tech }}</span>
          }
        </div>
      </div>
    </div>
  </div>
</div>
